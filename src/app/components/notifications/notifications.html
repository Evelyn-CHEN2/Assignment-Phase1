<ul class="notif-list p-0 m-0">
  @for (notification of notifications; track notification.id) {
    <li class="notif-card card shadow-sm mb-3">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-start gap-3">
          <!-- Left: main info -->
          <div class="flex-grow-1">
            <div class="notif-title mb-1">
              <i class="bi bi-bell me-2"></i>
              Group: {{ groupById[notification.groupToApply] }}
              <span class="status-pill text-capitalize me-2"
                  [ngClass]="notification.status">
              {{ notification.status }}
              </span>
            </div>

            <div class="notif-meta text-secondary">
              <span class="meta"><i class="bi bi-clock me-1"></i>Applied at: {{ formatDate(notification.id) }}</span>
              <span class="dot mx-2">•</span>
              <span class="meta"><i class="bi bi-person me-1"></i>Applier: {{ userById[notification.applier] }}</span>
              <span class="dot mx-2">•</span>

            </div>
          </div>

          <div class="notif-actions text-end">

            <div class="btn-group">
              <button 
                type="button"
                class="btn btn-approve btn-sm"
                data-bs-toggle="modal" 
                data-bs-target="#approveApplicationModal" 
                [disabled]="notification.status === 'approved'"
                (click)="openApproveModal(notification)">
                <i class="bi bi-check2-circle me-1"></i>Approve
              </button>

              <button 
                type="button"
                class="btn btn-delete btn-sm"
                data-bs-toggle="modal" 
                data-bs-target="#deleteApplicationModal" 
                (click)="openDeleteModal(notification)">
                <i class="bi bi-trash3 me-1"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </li>
  }
</ul>

<!-- Approve application modals -->
<div class="modal fade" id="approveApplicationModal" tabindex="-1" aria-labelledby="approveApplicationLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-sm">
    <div class="modal-content">
      <div class="modal-body py-3">
        <p class="mb-0" id="approveApplicationLabel">Are you sure you want to approve
          @if (selectedNotification) {
              <strong>Notice: </strong>?
          }
        </p>
      </div>
      <div class="modal-footer py-2">
        <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-sm btn-danger" (click)="selectedNotification && approve(selectedNotification, $event)" data-bs-dismiss="modal">
          Confirm
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Delete application modals  -->
<div class="modal fade" id="deleteApplicationModal" tabindex="-1" aria-labelledby="deleteApplicationLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-sm">
    <div class="modal-content">
      <div class="modal-body py-3">
        <p class="mb-0" id="deleteApplicationLabel">Are you sure you want to delete
          @if (selectedNotification) {
              <strong>Notice: </strong>?
          }
        </p>
      </div>
      <div class="modal-footer py-2">
        <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-sm btn-danger" (click)="selectedNotification && delete(selectedNotification, $event)" data-bs-dismiss="modal">
          Delete
        </button>
      </div>
    </div>
  </div>
</div>
